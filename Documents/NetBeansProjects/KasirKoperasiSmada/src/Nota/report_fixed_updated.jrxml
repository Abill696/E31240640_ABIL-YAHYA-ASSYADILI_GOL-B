<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="StrukTransaksi" pageWidth="170" pageHeight="595" columnWidth="160"
              leftMargin="5" rightMargin="5" topMargin="5" bottomMargin="5" uuid="struk-uuid">
    <parameter name="ID_Transaksi" class="java.lang.Integer"/>

    <queryString language="SQL">
        <![CDATA[
        SELECT 
            t.ID_Transaksi,
            t.Tanggal,
            u.Nama AS Nama_Kasir,
            b.Nama_Barang,
            b.Harga,
            dt.Qty,
            dt.Subtotal,
            t.Jumlah_Harga,
            t.Pembayaran,
            t.Kembalian
        FROM 
            transaksi t
        JOIN 
            detail_transaksi dt ON t.ID_Transaksi = dt.ID_Transaksi
        JOIN 
            barang b ON dt.ID_Barang = b.ID_Barang
        JOIN 
            user u ON t.ID_User = u.ID_User
        WHERE 
            t.ID_Transaksi = $P{ID_Transaksi}
        ]]>
    </queryString>

    <field name="Nama_Barang" class="java.lang.String"/>
    <field name="Harga" class="java.math.BigDecimal"/>
    <field name="Qty" class="java.lang.Integer"/>
    <field name="Subtotal" class="java.math.BigDecimal"/>
    <field name="Jumlah_Harga" class="java.math.BigDecimal"/>
    <field name="Pembayaran" class="java.lang.Integer"/>
    <field name="Kembalian" class="java.lang.Integer"/>
    <field name="Tanggal" class="java.sql.Date"/>
    <field name="Nama_Kasir" class="java.lang.String"/>
    <field name="ID_Transaksi" class="java.lang.Integer"/>

    <title>
        <band height="50">
            <staticText>
                <reportElement x="0" y="0" width="160" height="20"/>
                <textElement textAlignment="Center">
                    <font fontName="Consolas" size="10" isBold="true"/>
                </textElement>
                <text><![CDATA[KOPERASI SMADA]]></text>
            </staticText>
            <staticText>
                <reportElement x="0" y="20" width="160" height="15"/>
                <textElement textAlignment="Center">
                    <font fontName="Consolas" size="7"/>
                </textElement>
                <text><![CDATA[Jl. Jawa No. 16 Sumbersari Jember]]></text>
            </staticText>
        </band>
    </title>

    <pageHeader>
        <band height="30">
            <textField>
                <reportElement x="0" y="0" width="80" height="10"/>
                <textElement>
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Tanggal: " + new java.text.SimpleDateFormat("dd-MM-yyyy").format($F{Tanggal})]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="12" width="80" height="10"/>
                <textElement>
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Kasir: " + $F{Nama_Kasir}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="24" width="80" height="10"/>
                <textElement>
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["ID: " + $F{ID_Transaksi}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>

    <columnHeader>
        <band height="12">
            <staticText>
                <reportElement x="0" y="0" width="50" height="12"/>
                <textElement>
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <text><![CDATA[Barang]]></text>
            </staticText>
            <staticText>
                <reportElement x="52" y="0" width="30" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <text><![CDATA[Harga]]></text>
            </staticText>
            <staticText>
                <reportElement x="85" y="0" width="20" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <text><![CDATA[Qty]]></text>
            </staticText>
            <staticText>
                <reportElement x="108" y="0" width="50" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <text><![CDATA[Subtotal]]></text>
            </staticText>
        </band>
    </columnHeader>

    <detail>
        <band height="12">
            <textField>
                <reportElement x="0" y="0" width="50" height="12"/>
                <textElement>
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{Nama_Barang}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="52" y="0" width="30" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Rp. " + new java.text.DecimalFormat("#,##0").format($F{Harga})]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="85" y="0" width="20" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{Qty}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="108" y="0" width="50" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Rp. " + new java.text.DecimalFormat("#,##0").format($F{Subtotal})]]></textFieldExpression>
            </textField>
        </band>
    </detail>

    <columnFooter>
        <band height="40">
            <textField>
                <reportElement x="0" y="0" width="100" height="12"/>
                <textElement>
                    <font size="7" fontName="Consolas" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Total : "]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="108" y="0" width="50" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Rp. " + new java.text.DecimalFormat("#,##0").format($F{Jumlah_Harga})]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="13" width="100" height="12"/>
                <textElement>
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Bayar : "]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="108" y="13" width="50" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Rp. " + new java.text.DecimalFormat("#,##0").format($F{Pembayaran})]]></textFieldExpression>
            </textField>

            <textField>
                <reportElement x="0" y="26" width="100" height="12"/>
                <textElement>
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Kembali : "]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="108" y="26" width="50" height="12"/>
                <textElement textAlignment="Right">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <textFieldExpression><![CDATA["Rp. " + new java.text.DecimalFormat("#,##0").format($F{Kembalian})]]></textFieldExpression>
            </textField>
        </band>
    </columnFooter>

    <pageFooter>
        <band height="20">
            <staticText>
                <reportElement x="0" y="5" width="160" height="12"/>
                <textElement textAlignment="Center">
                    <font size="7" fontName="Consolas"/>
                </textElement>
                <text><![CDATA[*** Terima Kasih ***]]></text>
            </staticText>
        </band>
    </pageFooter>
</jasperReport>
